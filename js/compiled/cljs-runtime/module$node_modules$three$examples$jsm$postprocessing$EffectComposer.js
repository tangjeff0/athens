shadow$provide.module$node_modules$three$examples$jsm$postprocessing$EffectComposer=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.Pass=exports.EffectComposer=void 0;var _threeModule=require("module$node_modules$three$build$three_module"),_CopyShader=require("module$node_modules$three$examples$jsm$shaders$CopyShader"),_ShaderPass=require("module$node_modules$three$examples$jsm$postprocessing$ShaderPass"),_MaskPass=require("module$node_modules$three$examples$jsm$postprocessing$MaskPass");
global=function(renderer,renderTarget){this.renderer=renderer;if(void 0===renderTarget){renderTarget={minFilter:_threeModule.LinearFilter,magFilter:_threeModule.LinearFilter,format:_threeModule.RGBAFormat};var size=renderer.getSize(new _threeModule.Vector2);this._pixelRatio=renderer.getPixelRatio();this._width=size.width;this._height=size.height;renderTarget=new _threeModule.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,renderTarget);renderTarget.texture.name="EffectComposer.rt1"}else this._pixelRatio=
1,this._width=renderTarget.width,this._height=renderTarget.height;this.renderTarget1=renderTarget;this.renderTarget2=renderTarget.clone();this.renderTarget2.texture.name="EffectComposer.rt2";this.writeBuffer=this.renderTarget1;this.readBuffer=this.renderTarget2;this.renderToScreen=!0;this.passes=[];void 0===_CopyShader.CopyShader&&console.error("THREE.EffectComposer relies on CopyShader");void 0===_ShaderPass.ShaderPass&&console.error("THREE.EffectComposer relies on ShaderPass");this.copyPass=new _ShaderPass.ShaderPass(_CopyShader.CopyShader);
this.clock=new _threeModule.Clock};exports.EffectComposer=global;Object.assign(global.prototype,{swapBuffers:function(){var tmp=this.readBuffer;this.readBuffer=this.writeBuffer;this.writeBuffer=tmp},addPass:function(pass){this.passes.push(pass);pass.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(pass,index){this.passes.splice(index,0,pass);pass.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},removePass:function(pass){pass=this.passes.indexOf(pass);
-1!==pass&&this.passes.splice(pass,1)},isLastEnabledPass:function(passIndex){for(passIndex+=1;passIndex<this.passes.length;passIndex++)if(this.passes[passIndex].enabled)return!1;return!0},render:function(deltaTime){void 0===deltaTime&&(deltaTime=this.clock.getDelta());var currentRenderTarget=this.renderer.getRenderTarget(),maskActive=!1,i,il=this.passes.length;for(i=0;i<il;i++){var pass=this.passes[i];if(!1!==pass.enabled){pass.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i);pass.render(this.renderer,
this.writeBuffer,this.readBuffer,deltaTime,maskActive);if(pass.needsSwap){if(maskActive){var context=this.renderer.getContext(),stencil=this.renderer.state.buffers.stencil;stencil.setFunc(context.NOTEQUAL,1,4294967295);this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,deltaTime);stencil.setFunc(context.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==_MaskPass.MaskPass&&(pass instanceof _MaskPass.MaskPass?maskActive=!0:pass instanceof _MaskPass.ClearMaskPass&&(maskActive=!1))}}this.renderer.setRenderTarget(currentRenderTarget)},
reset:function(renderTarget){void 0===renderTarget&&(renderTarget=this.renderer.getSize(new _threeModule.Vector2),this._pixelRatio=this.renderer.getPixelRatio(),this._width=renderTarget.width,this._height=renderTarget.height,renderTarget=this.renderTarget1.clone(),renderTarget.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio));this.renderTarget1.dispose();this.renderTarget2.dispose();this.renderTarget1=renderTarget;this.renderTarget2=renderTarget.clone();this.writeBuffer=this.renderTarget1;
this.readBuffer=this.renderTarget2},setSize:function(width,height){this._width=width;this._height=height;width=this._width*this._pixelRatio;height=this._height*this._pixelRatio;this.renderTarget1.setSize(width,height);this.renderTarget2.setSize(width,height);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(width,height)},setPixelRatio:function(pixelRatio){this._pixelRatio=pixelRatio;this.setSize(this._width,this._height)}});global=function(){this.needsSwap=this.enabled=!0;this.renderToScreen=
this.clear=!1};exports.Pass=global;Object.assign(global.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}});global.FullScreenQuad=function(){var camera=new _threeModule.OrthographicCamera(-1,1,1,-1,0,1),geometry=new _threeModule.PlaneGeometry(2,2),FullScreenQuad=function(material){this._mesh=new _threeModule.Mesh(geometry,material)};Object.defineProperty(FullScreenQuad.prototype,"material",{get:function(){return this._mesh.material},
set:function(value){this._mesh.material=value}});Object.assign(FullScreenQuad.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(renderer){renderer.render(this._mesh,camera)}});return FullScreenQuad}()}
//# sourceMappingURL=module$node_modules$three$examples$jsm$postprocessing$EffectComposer.js.map
