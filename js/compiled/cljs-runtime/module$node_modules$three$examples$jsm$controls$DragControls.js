shadow$provide.module$node_modules$three$examples$jsm$controls$DragControls=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.DragControls=void 0;var _threeModule=require("module$node_modules$three$build$three_module");global=function(_objects,_camera,_domElement){function activate(){_domElement.addEventListener("pointermove",onPointerMove);_domElement.addEventListener("pointerdown",onPointerDown);_domElement.addEventListener("pointerup",onPointerCancel);
_domElement.addEventListener("pointerleave",onPointerCancel);_domElement.addEventListener("touchmove",onTouchMove);_domElement.addEventListener("touchstart",onTouchStart);_domElement.addEventListener("touchend",onTouchEnd)}function deactivate(){_domElement.removeEventListener("pointermove",onPointerMove);_domElement.removeEventListener("pointerdown",onPointerDown);_domElement.removeEventListener("pointerup",onPointerCancel);_domElement.removeEventListener("pointerleave",onPointerCancel);_domElement.removeEventListener("touchmove",
onTouchMove);_domElement.removeEventListener("touchstart",onTouchStart);_domElement.removeEventListener("touchend",onTouchEnd);_domElement.style.cursor=""}function onPointerMove(event){event.preventDefault();switch(event.pointerType){case "mouse":case "pen":var rect=_domElement.getBoundingClientRect();_mouse.x=(event.clientX-rect.left)/rect.width*2-1;_mouse.y=2*-((event.clientY-rect.top)/rect.height)+1;_raycaster.setFromCamera(_mouse,_camera);_selected&&scope.enabled?(_raycaster.ray.intersectPlane(_plane,
_intersection)&&_selected.position.copy(_intersection.sub(_offset).applyMatrix4(_inverseMatrix)),scope.dispatchEvent({type:"drag",object:_selected})):(_intersections.length=0,_raycaster.setFromCamera(_mouse,_camera),_raycaster.intersectObjects(_objects,!0,_intersections),0<_intersections.length?(event=_intersections[0].object,_plane.setFromNormalAndCoplanarPoint(_camera.getWorldDirection(_plane.normal),_worldPosition.setFromMatrixPosition(event.matrixWorld)),_hovered!==event&&(scope.dispatchEvent({type:"hoveron",
object:event}),_domElement.style.cursor="pointer",_hovered=event)):null!==_hovered&&(scope.dispatchEvent({type:"hoveroff",object:_hovered}),_domElement.style.cursor="auto",_hovered=null))}}function onPointerDown(event){event.preventDefault();switch(event.pointerType){case "mouse":case "pen":event.preventDefault(),_intersections.length=0,_raycaster.setFromCamera(_mouse,_camera),_raycaster.intersectObjects(_objects,!0,_intersections),0<_intersections.length&&(_selected=!0===scope.transformGroup?_objects[0]:
_intersections[0].object,_raycaster.ray.intersectPlane(_plane,_intersection)&&(_inverseMatrix.copy(_selected.parent.matrixWorld).invert(),_offset.copy(_intersection).sub(_worldPosition.setFromMatrixPosition(_selected.matrixWorld))),_domElement.style.cursor="move",scope.dispatchEvent({type:"dragstart",object:_selected}))}}function onPointerCancel(event){event.preventDefault();switch(event.pointerType){case "mouse":case "pen":event.preventDefault(),_selected&&(scope.dispatchEvent({type:"dragend",object:_selected}),
_selected=null),_domElement.style.cursor=_hovered?"pointer":"auto"}}function onTouchMove(event){event.preventDefault();event=event.changedTouches[0];var rect=_domElement.getBoundingClientRect();_mouse.x=(event.clientX-rect.left)/rect.width*2-1;_mouse.y=2*-((event.clientY-rect.top)/rect.height)+1;_raycaster.setFromCamera(_mouse,_camera);_selected&&scope.enabled&&(_raycaster.ray.intersectPlane(_plane,_intersection)&&_selected.position.copy(_intersection.sub(_offset).applyMatrix4(_inverseMatrix)),scope.dispatchEvent({type:"drag",
object:_selected}))}function onTouchStart(event){event.preventDefault();event=event.changedTouches[0];var rect=_domElement.getBoundingClientRect();_mouse.x=(event.clientX-rect.left)/rect.width*2-1;_mouse.y=2*-((event.clientY-rect.top)/rect.height)+1;_intersections.length=0;_raycaster.setFromCamera(_mouse,_camera);_raycaster.intersectObjects(_objects,!0,_intersections);0<_intersections.length&&(_selected=!0===scope.transformGroup?_objects[0]:_intersections[0].object,_plane.setFromNormalAndCoplanarPoint(_camera.getWorldDirection(_plane.normal),
_worldPosition.setFromMatrixPosition(_selected.matrixWorld)),_raycaster.ray.intersectPlane(_plane,_intersection)&&(_inverseMatrix.copy(_selected.parent.matrixWorld).invert(),_offset.copy(_intersection).sub(_worldPosition.setFromMatrixPosition(_selected.matrixWorld))),_domElement.style.cursor="move",scope.dispatchEvent({type:"dragstart",object:_selected}))}function onTouchEnd(event){event.preventDefault();_selected&&(scope.dispatchEvent({type:"dragend",object:_selected}),_selected=null);_domElement.style.cursor=
"auto"}var _plane=new _threeModule.Plane,_raycaster=new _threeModule.Raycaster,_mouse=new _threeModule.Vector2,_offset=new _threeModule.Vector3,_intersection=new _threeModule.Vector3,_worldPosition=new _threeModule.Vector3,_inverseMatrix=new _threeModule.Matrix4,_intersections=[],_selected=null,_hovered=null,scope=this;activate();this.enabled=!0;this.transformGroup=!1;this.activate=activate;this.deactivate=deactivate;this.dispose=function(){deactivate()};this.getObjects=function(){return _objects}};
exports.DragControls=global;global.prototype=Object.create(_threeModule.EventDispatcher.prototype);global.prototype.constructor=global}
//# sourceMappingURL=module$node_modules$three$examples$jsm$controls$DragControls.js.map
