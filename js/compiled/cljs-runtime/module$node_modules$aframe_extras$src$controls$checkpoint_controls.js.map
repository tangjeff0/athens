{
"version":3,
"file":"module$node_modules$aframe_extras$src$controls$checkpoint_controls.js",
"lineCount":4,
"mappings":"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",
"sources":["node_modules/aframe-extras/src/controls/checkpoint-controls.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$aframe_extras$src$controls$checkpoint_controls\"] = function(global,require,module,exports) {\nconst EPS = 0.1;\n\nmodule.exports = AFRAME.registerComponent('checkpoint-controls', {\n  schema: {\n    enabled: {default: true},\n    mode: {default: 'teleport', oneOf: ['teleport', 'animate']},\n    animateSpeed: {default: 3.0}\n  },\n\n  init: function () {\n    this.active = true;\n    this.checkpoint = null;\n\n    this.isNavMeshConstrained = false;\n\n    this.offset = new THREE.Vector3();\n    this.position = new THREE.Vector3();\n    this.targetPosition = new THREE.Vector3();\n  },\n\n  play: function () { this.active = true; },\n  pause: function () { this.active = false; },\n\n  setCheckpoint: function (checkpoint) {\n    const el = this.el;\n\n    if (!this.active) return;\n    if (this.checkpoint === checkpoint) return;\n\n    if (this.checkpoint) {\n      el.emit('navigation-end', {checkpoint: this.checkpoint});\n    }\n\n    this.checkpoint = checkpoint;\n    this.sync();\n\n    // Ignore new checkpoint if we're already there.\n    if (this.position.distanceTo(this.targetPosition) < EPS) {\n      this.checkpoint = null;\n      return;\n    }\n\n    el.emit('navigation-start', {checkpoint: checkpoint});\n\n    if (this.data.mode === 'teleport') {\n      this.el.setAttribute('position', this.targetPosition);\n      this.checkpoint = null;\n      el.emit('navigation-end', {checkpoint: checkpoint});\n      el.components['movement-controls'].updateNavLocation();\n    }\n  },\n\n  isVelocityActive: function () {\n    return !!(this.active && this.checkpoint);\n  },\n\n  getVelocity: function () {\n    if (!this.active) return;\n\n    const data = this.data;\n    const offset = this.offset;\n    const position = this.position;\n    const targetPosition = this.targetPosition;\n    const checkpoint = this.checkpoint;\n\n    this.sync();\n    if (position.distanceTo(targetPosition) < EPS) {\n      this.checkpoint = null;\n      this.el.emit('navigation-end', {checkpoint: checkpoint});\n      return offset.set(0, 0, 0);\n    }\n    offset.setLength(data.animateSpeed);\n    return offset;\n  },\n\n  sync: function () {\n    const offset = this.offset;\n    const position = this.position;\n    const targetPosition = this.targetPosition;\n\n    position.copy(this.el.getAttribute('position'));\n    this.checkpoint.object3D.getWorldPosition(targetPosition);\n    targetPosition.add(this.checkpoint.components.checkpoint.getOffset());\n    offset.copy(targetPosition).sub(position);\n  }\n});\n\n};"],
"names":["shadow$provide","global","require","module","exports","AFRAME","registerComponent","schema","enabled","default","mode","oneOf","animateSpeed","init","active","checkpoint","isNavMeshConstrained","offset","THREE","Vector3","position","targetPosition","play","pause","setCheckpoint","el","emit","sync","EPS","distanceTo","data","setAttribute","components","updateNavLocation","isVelocityActive","getVelocity","set","setLength","copy","getAttribute","object3D","getWorldPosition","add","getOffset","sub"]
}
