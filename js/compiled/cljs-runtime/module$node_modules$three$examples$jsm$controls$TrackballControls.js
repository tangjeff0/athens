shadow$provide.module$node_modules$three$examples$jsm$controls$TrackballControls=function(global,require,module,exports){Object.defineProperty(exports,"__esModule",{value:!0});exports.TrackballControls=void 0;var _threeModule=require("module$node_modules$three$build$three_module");global=function(object,domElement){function onPointerDown(event){if(!1!==scope.enabled)switch(event.pointerType){case "mouse":case "pen":event.preventDefault();event.stopPropagation();if(_state===STATE.NONE)switch(event.button){case scope.mouseButtons.LEFT:_state=
STATE.ROTATE;break;case scope.mouseButtons.MIDDLE:_state=STATE.ZOOM;break;case scope.mouseButtons.RIGHT:_state=STATE.PAN;break;default:_state=STATE.NONE}var state=_keyState!==STATE.NONE?_keyState:_state;state!==STATE.ROTATE||scope.noRotate?state!==STATE.ZOOM||scope.noZoom?state!==STATE.PAN||scope.noPan||(_panStart.copy(getMouseOnScreen(event.pageX,event.pageY)),_panEnd.copy(_panStart)):(_zoomStart.copy(getMouseOnScreen(event.pageX,event.pageY)),_zoomEnd.copy(_zoomStart)):(_moveCurr.copy(getMouseOnCircle(event.pageX,
event.pageY)),_movePrev.copy(_moveCurr));scope.domElement.ownerDocument.addEventListener("pointermove",onPointerMove);scope.domElement.ownerDocument.addEventListener("pointerup",onPointerUp);scope.dispatchEvent(startEvent)}}function onPointerMove(event){if(!1!==scope.enabled)switch(event.pointerType){case "mouse":case "pen":if(!1!==scope.enabled){event.preventDefault();event.stopPropagation();var state=_keyState!==STATE.NONE?_keyState:_state;state!==STATE.ROTATE||scope.noRotate?state!==STATE.ZOOM||
scope.noZoom?state!==STATE.PAN||scope.noPan||_panEnd.copy(getMouseOnScreen(event.pageX,event.pageY)):_zoomEnd.copy(getMouseOnScreen(event.pageX,event.pageY)):(_movePrev.copy(_moveCurr),_moveCurr.copy(getMouseOnCircle(event.pageX,event.pageY)))}}}function onPointerUp(event){if(!1!==scope.enabled)switch(event.pointerType){case "mouse":case "pen":!1!==scope.enabled&&(event.preventDefault(),event.stopPropagation(),_state=STATE.NONE,scope.domElement.ownerDocument.removeEventListener("pointermove",onPointerMove),
scope.domElement.ownerDocument.removeEventListener("pointerup",onPointerUp),scope.dispatchEvent(endEvent))}}function keydown(event){!1!==scope.enabled&&(window.removeEventListener("keydown",keydown),_keyState===STATE.NONE)&&(event.keyCode!==scope.keys[STATE.ROTATE]||scope.noRotate?event.keyCode!==scope.keys[STATE.ZOOM]||scope.noZoom?event.keyCode!==scope.keys[STATE.PAN]||scope.noPan||(_keyState=STATE.PAN):_keyState=STATE.ZOOM:_keyState=STATE.ROTATE)}function keyup(){!1!==scope.enabled&&(_keyState=
STATE.NONE,window.addEventListener("keydown",keydown))}function mousewheel(event){if(!1!==scope.enabled&&!0!==scope.noZoom){event.preventDefault();event.stopPropagation();switch(event.deltaMode){case 2:_zoomStart.y-=.025*event.deltaY;break;case 1:_zoomStart.y-=.01*event.deltaY;break;default:_zoomStart.y-=2.5E-4*event.deltaY}scope.dispatchEvent(startEvent);scope.dispatchEvent(endEvent)}}function touchstart(event){if(!1!==scope.enabled){event.preventDefault();switch(event.touches.length){case 1:_state=
STATE.TOUCH_ROTATE;_moveCurr.copy(getMouseOnCircle(event.touches[0].pageX,event.touches[0].pageY));_movePrev.copy(_moveCurr);break;default:_state=STATE.TOUCH_ZOOM_PAN;var dx=event.touches[0].pageX-event.touches[1].pageX,dy=event.touches[0].pageY-event.touches[1].pageY;_touchZoomDistanceEnd=_touchZoomDistanceStart=Math.sqrt(dx*dx+dy*dy);_panStart.copy(getMouseOnScreen((event.touches[0].pageX+event.touches[1].pageX)/2,(event.touches[0].pageY+event.touches[1].pageY)/2));_panEnd.copy(_panStart)}scope.dispatchEvent(startEvent)}}
function touchmove(event){if(!1!==scope.enabled)switch(event.preventDefault(),event.stopPropagation(),event.touches.length){case 1:_movePrev.copy(_moveCurr);_moveCurr.copy(getMouseOnCircle(event.touches[0].pageX,event.touches[0].pageY));break;default:var dx=event.touches[0].pageX-event.touches[1].pageX,dy=event.touches[0].pageY-event.touches[1].pageY;_touchZoomDistanceEnd=Math.sqrt(dx*dx+dy*dy);_panEnd.copy(getMouseOnScreen((event.touches[0].pageX+event.touches[1].pageX)/2,(event.touches[0].pageY+
event.touches[1].pageY)/2))}}function touchend(event){if(!1!==scope.enabled){switch(event.touches.length){case 0:_state=STATE.NONE;break;case 1:_state=STATE.TOUCH_ROTATE,_moveCurr.copy(getMouseOnCircle(event.touches[0].pageX,event.touches[0].pageY)),_movePrev.copy(_moveCurr)}scope.dispatchEvent(endEvent)}}function contextmenu(event){!1!==scope.enabled&&event.preventDefault()}void 0===domElement&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.');domElement===
document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var scope=this,STATE={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=object;this.domElement=domElement;this.enabled=!0;this.screen={left:0,top:0,width:0,height:0};this.rotateSpeed=1;this.zoomSpeed=1.2;this.panSpeed=.3;this.staticMoving=this.noPan=this.noZoom=this.noRotate=!1;this.dynamicDampingFactor=.2;this.minDistance=
0;this.maxDistance=Infinity;this.keys=[65,83,68];this.mouseButtons={LEFT:_threeModule.MOUSE.ROTATE,MIDDLE:_threeModule.MOUSE.DOLLY,RIGHT:_threeModule.MOUSE.PAN};this.target=new _threeModule.Vector3;var lastPosition=new _threeModule.Vector3,lastZoom=1,_state=STATE.NONE,_keyState=STATE.NONE,_eye=new _threeModule.Vector3,_movePrev=new _threeModule.Vector2,_moveCurr=new _threeModule.Vector2,_lastAxis=new _threeModule.Vector3,_lastAngle=0,_zoomStart=new _threeModule.Vector2,_zoomEnd=new _threeModule.Vector2,
_touchZoomDistanceStart=0,_touchZoomDistanceEnd=0,_panStart=new _threeModule.Vector2,_panEnd=new _threeModule.Vector2;this.target0=this.target.clone();this.position0=this.object.position.clone();this.up0=this.object.up.clone();this.zoom0=this.object.zoom;var changeEvent={type:"change"},startEvent={type:"start"},endEvent={type:"end"};this.handleResize=function(){var box=scope.domElement.getBoundingClientRect(),d=scope.domElement.ownerDocument.documentElement;scope.screen.left=box.left+window.pageXOffset-
d.clientLeft;scope.screen.top=box.top+window.pageYOffset-d.clientTop;scope.screen.width=box.width;scope.screen.height=box.height};var getMouseOnScreen=function(){var vector=new _threeModule.Vector2;return function(pageX,pageY){vector.set((pageX-scope.screen.left)/scope.screen.width,(pageY-scope.screen.top)/scope.screen.height);return vector}}(),getMouseOnCircle=function(){var vector=new _threeModule.Vector2;return function(pageX,pageY){vector.set((pageX-.5*scope.screen.width-scope.screen.left)/(.5*
scope.screen.width),(scope.screen.height+2*(scope.screen.top-pageY))/scope.screen.width);return vector}}();this.rotateCamera=function(){var axis=new _threeModule.Vector3,quaternion=new _threeModule.Quaternion,eyeDirection=new _threeModule.Vector3,objectUpDirection=new _threeModule.Vector3,objectSidewaysDirection=new _threeModule.Vector3,moveDirection=new _threeModule.Vector3,angle;return function(){moveDirection.set(_moveCurr.x-_movePrev.x,_moveCurr.y-_movePrev.y,0);(angle=moveDirection.length())?
(_eye.copy(scope.object.position).sub(scope.target),eyeDirection.copy(_eye).normalize(),objectUpDirection.copy(scope.object.up).normalize(),objectSidewaysDirection.crossVectors(objectUpDirection,eyeDirection).normalize(),objectUpDirection.setLength(_moveCurr.y-_movePrev.y),objectSidewaysDirection.setLength(_moveCurr.x-_movePrev.x),moveDirection.copy(objectUpDirection.add(objectSidewaysDirection)),axis.crossVectors(moveDirection,_eye).normalize(),angle*=scope.rotateSpeed,quaternion.setFromAxisAngle(axis,
angle),_eye.applyQuaternion(quaternion),scope.object.up.applyQuaternion(quaternion),_lastAxis.copy(axis),_lastAngle=angle):!scope.staticMoving&&_lastAngle&&(_lastAngle*=Math.sqrt(1-scope.dynamicDampingFactor),_eye.copy(scope.object.position).sub(scope.target),quaternion.setFromAxisAngle(_lastAxis,_lastAngle),_eye.applyQuaternion(quaternion),scope.object.up.applyQuaternion(quaternion));_movePrev.copy(_moveCurr)}}();this.zoomCamera=function(){if(_state===STATE.TOUCH_ZOOM_PAN){var factor=_touchZoomDistanceStart/
_touchZoomDistanceEnd;_touchZoomDistanceStart=_touchZoomDistanceEnd;scope.object.isPerspectiveCamera?_eye.multiplyScalar(factor):scope.object.isOrthographicCamera?(scope.object.zoom*=factor,scope.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")}else factor=1+(_zoomEnd.y-_zoomStart.y)*scope.zoomSpeed,1!==factor&&0<factor&&(scope.object.isPerspectiveCamera?_eye.multiplyScalar(factor):scope.object.isOrthographicCamera?(scope.object.zoom/=factor,scope.object.updateProjectionMatrix()):
console.warn("THREE.TrackballControls: Unsupported camera type")),scope.staticMoving?_zoomStart.copy(_zoomEnd):_zoomStart.y+=(_zoomEnd.y-_zoomStart.y)*this.dynamicDampingFactor};this.panCamera=function(){var mouseChange=new _threeModule.Vector2,objectUp=new _threeModule.Vector3,pan=new _threeModule.Vector3;return function(){mouseChange.copy(_panEnd).sub(_panStart);if(mouseChange.lengthSq()){if(scope.object.isOrthographicCamera){var scale_y=(scope.object.top-scope.object.bottom)/scope.object.zoom/
scope.domElement.clientWidth;mouseChange.x*=(scope.object.right-scope.object.left)/scope.object.zoom/scope.domElement.clientWidth;mouseChange.y*=scale_y}mouseChange.multiplyScalar(_eye.length()*scope.panSpeed);pan.copy(_eye).cross(scope.object.up).setLength(mouseChange.x);pan.add(objectUp.copy(scope.object.up).setLength(mouseChange.y));scope.object.position.add(pan);scope.target.add(pan);scope.staticMoving?_panStart.copy(_panEnd):_panStart.add(mouseChange.subVectors(_panEnd,_panStart).multiplyScalar(scope.dynamicDampingFactor))}}}();
this.checkDistances=function(){scope.noZoom&&scope.noPan||(_eye.lengthSq()>scope.maxDistance*scope.maxDistance&&(scope.object.position.addVectors(scope.target,_eye.setLength(scope.maxDistance)),_zoomStart.copy(_zoomEnd)),_eye.lengthSq()<scope.minDistance*scope.minDistance&&(scope.object.position.addVectors(scope.target,_eye.setLength(scope.minDistance)),_zoomStart.copy(_zoomEnd)))};this.update=function(){_eye.subVectors(scope.object.position,scope.target);scope.noRotate||scope.rotateCamera();scope.noZoom||
scope.zoomCamera();scope.noPan||scope.panCamera();scope.object.position.addVectors(scope.target,_eye);if(scope.object.isPerspectiveCamera)scope.checkDistances(),scope.object.lookAt(scope.target),1E-6<lastPosition.distanceToSquared(scope.object.position)&&(scope.dispatchEvent(changeEvent),lastPosition.copy(scope.object.position));else if(scope.object.isOrthographicCamera){if(scope.object.lookAt(scope.target),1E-6<lastPosition.distanceToSquared(scope.object.position)||lastZoom!==scope.object.zoom)scope.dispatchEvent(changeEvent),
lastPosition.copy(scope.object.position),lastZoom=scope.object.zoom}else console.warn("THREE.TrackballControls: Unsupported camera type")};this.reset=function(){_keyState=_state=STATE.NONE;scope.target.copy(scope.target0);scope.object.position.copy(scope.position0);scope.object.up.copy(scope.up0);scope.object.zoom=scope.zoom0;scope.object.updateProjectionMatrix();_eye.subVectors(scope.object.position,scope.target);scope.object.lookAt(scope.target);scope.dispatchEvent(changeEvent);lastPosition.copy(scope.object.position);
lastZoom=scope.object.zoom};this.dispose=function(){scope.domElement.removeEventListener("contextmenu",contextmenu);scope.domElement.removeEventListener("pointerdown",onPointerDown);scope.domElement.removeEventListener("wheel",mousewheel);scope.domElement.removeEventListener("touchstart",touchstart);scope.domElement.removeEventListener("touchend",touchend);scope.domElement.removeEventListener("touchmove",touchmove);scope.domElement.ownerDocument.removeEventListener("pointermove",onPointerMove);scope.domElement.ownerDocument.removeEventListener("pointerup",
onPointerUp);window.removeEventListener("keydown",keydown);window.removeEventListener("keyup",keyup)};this.domElement.addEventListener("contextmenu",contextmenu);this.domElement.addEventListener("pointerdown",onPointerDown);this.domElement.addEventListener("wheel",mousewheel);this.domElement.addEventListener("touchstart",touchstart);this.domElement.addEventListener("touchend",touchend);this.domElement.addEventListener("touchmove",touchmove);this.domElement.ownerDocument.addEventListener("pointermove",
onPointerMove);this.domElement.ownerDocument.addEventListener("pointerup",onPointerUp);window.addEventListener("keydown",keydown);window.addEventListener("keyup",keyup);this.handleResize();this.update()};exports.TrackballControls=global;global.prototype=Object.create(_threeModule.EventDispatcher.prototype);global.prototype.constructor=global}
//# sourceMappingURL=module$node_modules$three$examples$jsm$controls$TrackballControls.js.map
