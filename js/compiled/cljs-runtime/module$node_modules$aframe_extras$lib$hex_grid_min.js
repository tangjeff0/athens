shadow$provide.module$node_modules$aframe_extras$lib$hex_grid_min=function(global,require,module,exports){var vg=module.exports={VERSION:"0.1.1",PI:Math.PI,TAU:2*Math.PI,DEG_TO_RAD:.0174532925,RAD_TO_DEG:57.2957795,SQRT3:Math.sqrt(3),TILE:"tile",ENT:"entity",STR:"structure",HEX:"hex",SQR:"square",ABS:"abstract"};vg.Board=function(e,t){if(!e)throw Error("You must pass in a grid system for the board to use.");this.tiles=[];this.tileGroup=null;this.group=new THREE.Object3D;this.overlay=this.grid=null;
this.finder=new vg.AStarFinder(t);vg.Loader.init();this.setGrid(e)};vg.Board.prototype={setEntityOnTile:function(e,t){var i=this.grid.cellToPixel(t.cell);e.position.copy(i);e.position.y+=e.heightOffset||0;e.tile&&(e.tile.entity=null);e.tile=t;t.entity=e},addTile:function(e){-1===this.tiles.indexOf(e)&&(this.tiles.push(e),this.snapTileToGrid(e),e.position.y=0,this.tileGroup.add(e.mesh),this.grid.add(e.cell),e.cell.tile=e)},removeTile:function(e){if(e){var t=this.tiles.indexOf(e);this.grid.remove(e.cell);
-1!==t&&this.tiles.splice(t,1);e.dispose()}},removeAllTiles:function(){if(this.tileGroup)for(var e=this.tileGroup.children,t=0;t<e.length;t++)this.tileGroup.remove(e[t])},getTileAtCell:function(e){var t=this.grid.cellToHash(e);return e.tile||("undefined"!=typeof this.grid.cells[t]?this.grid.cells[t].tile:null)},snapToGrid:function(e){var t=this.grid.pixelToCell(e);e.copy(this.grid.cellToPixel(t))},snapTileToGrid:function(e){if(e.cell)e.position.copy(this.grid.cellToPixel(e.cell));else{var t=this.grid.pixelToCell(e.position);
e.position.copy(this.grid.cellToPixel(t))}return e},getRandomTile:function(){var e=vg.Tools.randomInt(0,this.tiles.length-1);return this.tiles[e]},findPath:function(e,t,i){return this.finder.findPath(e.cell,t.cell,i,this.grid)},setGrid:function(e$jscomp$0){this.group.remove(this.tileGroup);this.grid&&e$jscomp$0!==this.grid&&(this.removeAllTiles(),this.tiles.forEach(function(e){this.grid.remove(e.cell);e.dispose()}),this.grid.dispose());this.grid=e$jscomp$0;this.tiles=[];this.tileGroup=new THREE.Object3D;
this.group.add(this.tileGroup)},generateOverlay:function(e){var t=new THREE.LineBasicMaterial({color:0,opacity:.3});this.overlay&&this.group.remove(this.overlay);this.overlay=new THREE.Object3D;this.grid.generateOverlay(e,this.overlay,t);this.group.add(this.overlay)},generateTilemap:function(e){this.reset();this.tiles=e=this.grid.generateTiles(e);this.tileGroup=new THREE.Object3D;for(var i=0;i<e.length;i++)this.tileGroup.add(e[i].mesh);this.group.add(this.tileGroup)},reset:function(){this.removeAllTiles();
this.tileGroup&&this.group.remove(this.tileGroup)}};vg.Board.prototype.constructor=vg.Board;vg.Cell=function(e,t,i,s){this.q=e||0;this.r=t||0;this.s=i||0;this.h=s||1;this.tile=null;this.userData={};this.walkable=!0;this._priority=this._calcCost=0;this._visited=!1;this._parent=null;this.uniqueID=vg.LinkedList.generateID()};vg.Cell.prototype={set:function(e,t,i){return this.q=e,this.r=t,this.s=i,this},copy:function(e){return this.q=e.q,this.r=e.r,this.s=e.s,this.h=e.h,this.tile=e.tile||null,this.userData=
e.userData||{},this.walkable=e.walkable,this},add:function(e){return this.q+=e.q,this.r+=e.r,this.s+=e.s,this},equals:function(e){return this.q===e.q&&this.r===e.r&&this.s===e.s}};vg.Cell.prototype.constructor=vg.Cell;vg.HexGrid=function(e){e=e||{};this.type=vg.HEX;this.size=5;this.cellSize="undefined"==typeof e.cellSize?10:e.cellSize;this.cells={};this.numCells=0;this.extrudeSettings=null;this.autogenerated=!1;var i=[];for(e=0;6>e;e++)i.push(this._createVertex(e));this.cellShape=new THREE.Shape;
this.cellShape.moveTo(i[0].x,i[0].y);for(e=1;6>e;e++)this.cellShape.lineTo(i[e].x,i[e].y);this.cellShape.lineTo(i[0].x,i[0].y);this.cellShape.autoClose=!0;this.cellGeo=new THREE.Geometry;this.cellGeo.vertices=i;this.cellGeo.verticesNeedUpdate=!0;this.cellShapeGeo=new THREE.ShapeGeometry(this.cellShape);this._cellWidth=2*this.cellSize;this._cellLength=.5*vg.SQRT3*this._cellWidth;this._hashDelimeter=".";this._directions=[new vg.Cell(1,-1,0),new vg.Cell(1,0,-1),new vg.Cell(0,1,-1),new vg.Cell(-1,1,0),
new vg.Cell(-1,0,1),new vg.Cell(0,-1,1)];this._diagonals=[new vg.Cell(2,-1,-1),new vg.Cell(1,1,-2),new vg.Cell(-1,2,-1),new vg.Cell(-2,1,1),new vg.Cell(-1,-1,2),new vg.Cell(1,-2,1)];this._list=[];this._vec3=new THREE.Vector3;this._cel=new vg.Cell;this._conversionVec=new THREE.Vector3;this._geoCache=[];this._matCache=[]};vg.HexGrid.TWO_THIRDS=2/3;vg.HexGrid.prototype={cellToPixel:function(e){return this._vec3.x=e.q*this._cellWidth*.75,this._vec3.y=e.h,this._vec3.z=-((e.s-e.r)*this._cellLength*.5),
this._vec3},pixelToCell:function(e){var t=vg.HexGrid.TWO_THIRDS/this.cellSize*e.x;e=(-e.x/3+vg.SQRT3/3*e.z)/this.cellSize;return this._cel.set(t,e,-t-e),this._cubeRound(this._cel)},getCellAt:function(e){var t=vg.HexGrid.TWO_THIRDS/this.cellSize*e.x;e=(-e.x/3+vg.SQRT3/3*e.z)/this.cellSize;return this._cel.set(t,e,-t-e),this._cubeRound(this._cel),this.cells[this.cellToHash(this._cel)]},getNeighbors:function(e,t,i){var s,l=this._directions.length;for(s=this._list.length=0;l>s;s++){this._cel.copy(e);
this._cel.add(this._directions[s]);var n=this.cells[this.cellToHash(this._cel)];!n||i&&!i(e,n)||this._list.push(n)}if(t)for(s=0;l>s;s++)this._cel.copy(e),this._cel.add(this._diagonals[s]),n=this.cells[this.cellToHash(this._cel)],!n||i&&!i(e,n)||this._list.push(n);return this._list},getRandomCell:function(){var e,t=0,i=vg.Tools.randomInt(0,this.numCells);for(e in this.cells){if(t===i)break;t++}return this.cells[e]},cellToHash:function(e){return e.q+this._hashDelimeter+e.r+this._hashDelimeter+e.s},
distance:function(e,t){return Math.max(Math.abs(e.q-t.q),Math.abs(e.r-t.r),Math.abs(e.s-t.s))+(t.h-e.h)},clearPath:function(){var e;for(e in this.cells){var t=this.cells[e];t._calcCost=0;t._priority=0;t._parent=null;t._visited=!1}},traverse:function(e){for(var t in this.cells)e(this.cells[t])},generateTile:function(e,t,i){var s=Math.abs(e.h);1>s&&(s=1);var n=this._geoCache[s];n||(this.extrudeSettings.amount=s,n=new THREE.ExtrudeGeometry(this.cellShape,this.extrudeSettings),this._geoCache[s]=n);t=
new vg.Tile({size:this.cellSize,scale:t,cell:e,geometry:n,material:i});return e.tile=t,t},generateTiles:function(e){e=e||{};var t=[],i={tileScale:.95,cellSize:this.cellSize,material:null,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5}};i=vg.Tools.merge(i,e);this.cellSize=i.cellSize;this._cellWidth=2*this.cellSize;this._cellLength=.5*vg.SQRT3*this._cellWidth;this.autogenerated=!0;this.extrudeSettings=i.extrudeSettings;var s;for(s in this.cells){var l=
this.cells[s];e=this.generateTile(l,i.tileScale,i.material);e.position.copy(this.cellToPixel(l));e.position.y=0;t.push(e)}return t},generateTilePoly:function(e){e||(e=new THREE.MeshBasicMaterial({color:2405631}));e=new THREE.Mesh(this.cellShapeGeo,e);return this._vec3.set(1,0,0),e.rotateOnAxis(this._vec3,vg.PI/2),e},generate:function(e){e=e||{};this.size="undefined"==typeof e.size?this.size:e.size;var i,n;for(e=-this.size;e<this.size+1;e++)for(i=-this.size;i<this.size+1;i++){var s=-e-i;Math.abs(e)<=
this.size&&Math.abs(i)<=this.size&&Math.abs(s)<=this.size&&(n=new vg.Cell(e,i,s),this.add(n))}},generateOverlay:function(e,t,i){var s,n,l,r=this.cellShape.createPointsGeometry();for(s=-e;e+1>s;s++)for(n=-e;e+1>n;n++)if(l=-s-n,Math.abs(s)<=e&&Math.abs(n)<=e&&Math.abs(l)<=e){this._cel.set(s,n,l);var h=new THREE.Line(r,i);h.position.copy(this.cellToPixel(this._cel));h.rotation.x=90*vg.DEG_TO_RAD;t.add(h)}},add:function(e){var t=this.cellToHash(e);if(!this.cells[t])return this.cells[t]=e,this.numCells++,
e},remove:function(e){e=this.cellToHash(e);this.cells[e]&&(delete this.cells[e],this.numCells--)},dispose:function(){this.cells=null;this.numCells=0;this.cellShape=null;this.cellGeo.dispose();this.cellGeo=null;this.cellShapeGeo.dispose();this._matCache=this._geoCache=this._conversionVec=this._vec3=this._list=this.cellShapeGeo=null},load:function(e$jscomp$0,t,i){var s=this;vg.Tools.getJSON({url:e$jscomp$0,callback:function(e){s.fromJSON(e);t.call(i||null,e)},cache:!1,scope:s})},fromJSON:function(e){var s=
e.cells;this.cells={};this.numCells=0;this.size=e.size;this.cellSize=e.cellSize;this._cellWidth=2*this.cellSize;this._cellLength=.5*vg.SQRT3*this._cellWidth;this.extrudeSettings=e.extrudeSettings;this.autogenerated=e.autogenerated;for(e=0;e<s.length;e++){var i=new vg.Cell;i.copy(s[e]);this.add(i)}},toJSON:function(){var t,i={size:this.size,cellSize:this.cellSize,extrudeSettings:this.extrudeSettings,autogenerated:this.autogenerated},s=[];for(t in this.cells){var e=this.cells[t];s.push({q:e.q,r:e.r,
s:e.s,h:e.h,walkable:e.walkable,userData:e.userData})}return i.cells=s,i},_createVertex:function(e){e*=vg.TAU/6;return new THREE.Vector3(this.cellSize*Math.cos(e),this.cellSize*Math.sin(e),0)},_cubeRound:function(e){var t=Math.round(e.q),i=Math.round(e.r),s=Math.round(e.s),n=Math.abs(t-e.q),l=Math.abs(i-e.r);e=Math.abs(s-e.s);return n>l&&n>e?t=-i-s:l>e?i=-t-s:s=-t-i,this._cel.set(t,i,s)}};vg.HexGrid.prototype.constructor=vg.HexGrid;vg.SqrGrid=function(e){e=e||{};this.type=vg.SQR;this.size=5;this.cellSize=
"undefined"==typeof e.cellSize?10:e.cellSize;this.cells={};this.numCells=0;this.extrudeSettings=null;this.autogenerated=!1;e=[];e.push(new THREE.Vector3);e.push(new THREE.Vector3(-this.cellSize,this.cellSize));e.push(new THREE.Vector3(this.cellSize,this.cellSize));e.push(new THREE.Vector3(this.cellSize,-this.cellSize));this.cellShape=new THREE.Shape;this.cellShape.moveTo(-this.cellSize,-this.cellSize);this.cellShape.lineTo(-this.cellSize,this.cellSize);this.cellShape.lineTo(this.cellSize,this.cellSize);
this.cellShape.lineTo(this.cellSize,-this.cellSize);this.cellShape.lineTo(-this.cellSize,-this.cellSize);this.cellGeo=new THREE.Geometry;this.cellGeo.vertices=e;this.cellGeo.verticesNeedUpdate=!0;this.cellShapeGeo=new THREE.ShapeGeometry(this.cellShape);this._fullCellSize=2*this.cellSize;this._hashDelimeter=".";this._directions=[new vg.Cell(1,0,0),new vg.Cell(0,-1,0),new vg.Cell(-1,0,0),new vg.Cell(0,1,0)];this._diagonals=[new vg.Cell(-1,-1,0),new vg.Cell(-1,1,0),new vg.Cell(1,1,0),new vg.Cell(1,
-1,0)];this._list=[];this._vec3=new THREE.Vector3;this._cel=new vg.Cell;this._conversionVec=new THREE.Vector3;this._geoCache=[];this._matCache=[]};vg.SqrGrid.prototype={cellToPixel:function(e){return this._vec3.x=e.q*this._fullCellSize,this._vec3.y=e.h,this._vec3.z=e.r*this._fullCellSize,this._vec3},pixelToCell:function(e){return this._cel.set(Math.round(e.x/this._fullCellSize),Math.round(e.z/this._fullCellSize),0)},getCellAt:function(e){return this._cel.set(Math.round(e.x/this._fullCellSize),Math.round(e.z/
this._fullCellSize)),this.cells[this.cellToHash(this._cel)]},getNeighbors:function(e,t,i){var s,l=this._directions.length;for(s=this._list.length=0;l>s;s++){this._cel.copy(e);this._cel.add(this._directions[s]);var n=this.cells[this.cellToHash(this._cel)];!n||i&&!i(e,n)||this._list.push(n)}if(t)for(s=0;l>s;s++)this._cel.copy(e),this._cel.add(this._diagonals[s]),n=this.cells[this.cellToHash(this._cel)],!n||i&&!i(e,n)||this._list.push(n);return this._list},getRandomCell:function(){var e,t=0,i=vg.Tools.randomInt(0,
this.numCells);for(e in this.cells){if(t===i)break;t++}return this.cells[e]},cellToHash:function(e){return e.q+this._hashDelimeter+e.r},distance:function(e,t){return Math.max(Math.abs(e.q-t.q),Math.abs(e.r-t.r))+(t.h-e.h)},clearPath:function(){var e;for(e in this.cells){var t=this.cells[e];t._calcCost=0;t._priority=0;t._parent=null;t._visited=!1}},traverse:function(e){for(var t in this.cells)e(this.cells[t])},generateTile:function(e,t,i){var s=Math.abs(e.h);1>s&&(s=1);var n=this._geoCache[s];n||(this.extrudeSettings.amount=
s,n=new THREE.ExtrudeGeometry(this.cellShape,this.extrudeSettings),this._geoCache[s]=n);t=new vg.Tile({size:this.cellSize,scale:t,cell:e,geometry:n,material:i});return e.tile=t,t},generateTiles:function(e){e=e||{};var t=[],i={tileScale:.95,cellSize:this.cellSize,material:null,extrudeSettings:{amount:1,bevelEnabled:!0,bevelSegments:1,steps:1,bevelSize:.5,bevelThickness:.5}};i=vg.Tools.merge(i,e);this.cellSize=i.cellSize;this._fullCellSize=2*this.cellSize;this.autogenerated=!0;this.extrudeSettings=
i.extrudeSettings;var s;for(s in this.cells){var l=this.cells[s];e=this.generateTile(l,i.tileScale,i.material);e.position.copy(this.cellToPixel(l));e.position.y=0;t.push(e)}return t},generateTilePoly:function(e){e||(e=new THREE.MeshBasicMaterial({color:2405631}));e=new THREE.Mesh(this.cellShapeGeo,e);return this._vec3.set(1,0,0),e.rotateOnAxis(this._vec3,vg.PI/2),e},generate:function(e){e=e||{};this.size="undefined"==typeof e.size?this.size:e.size;var i,n=Math.ceil(this.size/2);for(e=-n;n>e;e++)for(i=
-n;n>i;i++){var s=new vg.Cell(e,i+1);this.add(s)}},generateOverlay:function(e,t,i){var n,l=Math.ceil(e/2);for(e=-l;l>e;e++)for(n=-l;l>n;n++){this._cel.set(e,n);var r=new THREE.Line(this.cellGeo,i);r.position.copy(this.cellToPixel(this._cel));r.rotation.x=90*vg.DEG_TO_RAD;t.add(r)}},add:function(e){var t=this.cellToHash(e);if(!this.cells[t])return this.cells[t]=e,this.numCells++,e},remove:function(e){e=this.cellToHash(e);this.cells[e]&&(delete this.cells[e],this.numCells--)},dispose:function(){this.cells=
null;this.numCells=0;this.cellShape=null;this.cellGeo.dispose();this.cellGeo=null;this.cellShapeGeo.dispose();this._matCache=this._geoCache=this._conversionVec=this._vec3=this._list=this.cellShapeGeo=null},load:function(e$jscomp$0,t,i){vg.Tools.getJSON({url:e$jscomp$0,callback:function(e){this.fromJSON(e);t.call(i||null,e)},cache:!1,scope:this})},fromJSON:function(e){var s=e.cells;this.cells={};this.numCells=0;this.size=e.size;this.cellSize=e.cellSize;this._fullCellSize=2*this.cellSize;this.extrudeSettings=
e.extrudeSettings;this.autogenerated=e.autogenerated;for(e=0;e<s.length;e++){var i=new vg.Cell;i.copy(s[e]);this.add(i)}},toJSON:function(){var t,i={size:this.size,cellSize:this.cellSize,extrudeSettings:this.extrudeSettings,autogenerated:this.autogenerated},s=[];for(t in this.cells){var e=this.cells[t];s.push({q:e.q,r:e.r,s:e.s,h:e.h,walkable:e.walkable,userData:e.userData})}return i.cells=s,i}};vg.SqrGrid.prototype.constructor=vg.SqrGrid;vg.Tile=function(e){e=e||{};var t={cell:null,geometry:null,
material:null};if(t=vg.Tools.merge(t,e),!t.cell||!t.geometry)throw Error("Missing vg.Tile configuration");this.cell=t.cell;this.cell.tile&&this.cell.tile!==this&&this.cell.tile.dispose();this.cell.tile=this;this.uniqueID=vg.Tools.generateID();this.geometry=t.geometry;(this.material=t.material)||(this.material=new THREE.MeshPhongMaterial({color:vg.Tools.randomizeRGB("30, 30, 30",13)}));this.objectType=vg.TILE;this.entity=null;this.userData={};this.selected=!1;this.highlight="0x0084cc";this.mesh=new THREE.Mesh(this.geometry,
this.material);this.mesh.userData.structure=this;this.position=this.mesh.position;this.rotation=this.mesh.rotation;this.rotation.x=-90*vg.DEG_TO_RAD;this.mesh.scale.set(t.scale,t.scale,1);this.material.emissive?this._emissive=this.material.emissive.getHex():this._emissive=null};vg.Tile.prototype={select:function(){return this.material.emissive&&this.material.emissive.setHex(this.highlight),this.selected=!0,this},deselect:function(){return null!==this._emissive&&this.material.emissive&&this.material.emissive.setHex(this._emissive),
this.selected=!1,this},toggle:function(){return this.selected?this.deselect():this.select(),this},dispose:function(){this.cell&&this.cell.tile&&(this.cell.tile=null);this.rotation=this.position=this.cell=null;this.mesh.parent&&this.mesh.parent.remove(this.mesh);this._emissive=this.geometry=this.entity=this.userData=this.material=this.mesh=this.mesh.userData.structure=null}};vg.Tile.prototype.constructor=vg.Tile;(function(){var e$jscomp$0=function(){this.prev=this.next=this.obj=null;this.free=!0},
t$jscomp$0=function(){this.last=this.first=null;this.length=0;this.objToNodeMap={};this.uniqueID=Date.now()+""+Math.floor(1E3*Math.random());this.sortArray=[]};t$jscomp$0.generateID=function(){return Math.random().toString(36).slice(2)+Date.now()};t$jscomp$0.prototype={getNode:function(e){return this.objToNodeMap[e.uniqueID]},addNode:function(i){var s=new e$jscomp$0;if(!i.uniqueID)try{i.uniqueID=t$jscomp$0.generateID()}catch(n){return console.error("[LinkedList.addNode] obj passed is immutable: cannot attach necessary identifier"),
null}return s.obj=i,s.free=!1,this.objToNodeMap[i.uniqueID]=s,s},swapObjects:function(e,t){this.objToNodeMap[e.obj.uniqueID]=null;this.objToNodeMap[t.uniqueID]=e;e.obj=t},add:function(e){var t=this.objToNodeMap[e.uniqueID];if(t){if(!1===t.free)return;t.obj=e;t.free=!1;t.next=null;t.prev=null}else t=this.addNode(e);if(this.first){if(!this.last)throw Error("[LinkedList.add] No last in the list -- that shouldn't happen here");this.last.next=t;t.prev=this.last;this.last=t;t.next=null}else this.last=this.first=
t,t.next=null,t.prev=null;this.length++;this.showDebug&&this.dump("after add")},has:function(e){return!!this.objToNodeMap[e.uniqueID]},moveUp:function(e){this.dump("before move up");e=this.getNode(e);if(!e)throw"Oops, trying to move an object that isn't in the list";if(e.prev){var i=e.prev,s=i.prev;e==this.last&&(this.last=i);var n=e.next;s&&(s.next=e);e.next=i;e.prev=i.prev;i.next=n;i.prev=e;this.first==i&&(this.first=e)}},moveDown:function(e){e=this.getNode(e);if(!e)throw"Oops, trying to move an object that isn't in the list";
if(e.next){var i=e.next;this.moveUp(i.obj);this.last==i&&(this.last=e)}},sort:function(e){var s=this.sortArray;var i=this.first;for(s.length=0;i;)s.push(i.obj),i=i.next;this.clear();s.sort(e);i=s.length;for(e=0;i>e;e++)this.add(s[e])},remove:function(e){e=this.getNode(e);return!e||e.free?!1:(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.prev||(this.first=e.next),e.next||(this.last=e.prev),e.free=!0,e.prev=null,e.next=null,this.length--,!0)},shift:function(){var e=this.first;return 0===
this.length?null:(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.first=e.next,e.next||(this.last=null),e.free=!0,e.prev=null,e.next=null,this.length--,e.obj)},pop:function(){var e=this.last;return 0===this.length?null:(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.last=e.prev,e.prev||(this.first=null),e.free=!0,e.prev=null,e.next=null,this.length--,e.obj)},concat:function(e){for(e=e.first;e;)this.add(e.obj),e=e.next},clear:function(){for(var e=this.first;e;)e.free=
!0,e=e.next;this.first=null;this.length=0},dispose:function(){for(var e=this.first;e;)e.obj=null,e=e.next;this.objToNodeMap=this.first=null},dump:function(e){console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d"+e+"\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d");for(e=this.first;e;)console.log("{"+e.obj.toString()+"} previous\x3d"+(e.prev?e.prev.obj:"NULL")),e=e.next();console.log("\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d\x3d");
console.log("Last: {"+(this.last?this.last.obj:"NULL")+"} First: {"+(this.first?this.first.obj:"NULL")+"}")}};t$jscomp$0.prototype.constructor=t$jscomp$0;vg.LinkedList=t$jscomp$0})();(function(){var e$jscomp$0=function(e,t,i,s,n){this._listener=t;this.isOnce=i;this.context=s;this.signal=e;this._priority=n||0};e$jscomp$0.prototype={active:!0,params:null,execute:function(e){var t,i;return this.active&&this._listener&&(i=this.params?this.params.concat(e):e,t=this._listener.apply(this.context,i),this.isOnce&&
this.detach()),t},detach:function(){return this.isBound()?this.signal.remove(this._listener,this.context):null},isBound:function(){return!!this.signal&&!!this._listener},_destroy:function(){delete this.signal;delete this._listener;delete this.context},toString:function(){return"[SignalBinding isOnce:"+this.isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};e$jscomp$0.prototype.constructor=e$jscomp$0;var t$jscomp$0=function(){this._bindings=[];this._prevParams=null;var e=this;this.dispatch=
function(){t$jscomp$0.prototype.dispatch.apply(e,arguments)}};t$jscomp$0.prototype={memorize:!1,_shouldPropagate:!0,active:!0,validateListener:function(e,t){if("function"!=typeof e)throw Error("Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}",t));},_registerListener:function(t,i,s,n){var l,r=this._indexOfListener(t,s);if(-1!==r){if(l=this._bindings[r],l.isOnce!==i)throw Error("You cannot add"+(i?"":"Once")+"() then add"+(i?"Once":"")+"() the same listener without removing the relationship first.");
}else l=new e$jscomp$0(this,t,i,s,n),this._addBinding(l);return this.memorize&&this._prevParams&&l.execute(this._prevParams),l},_addBinding:function(e){var t=this._bindings.length;do t--;while(this._bindings[t]&&e._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){for(var i,s=this._bindings.length;s--;)if(i=this._bindings[s],i._listener===e&&i.context===t)return s;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,
t,i){return this.validateListener(e,"add"),this._registerListener(e,!1,t,i)},addOnce:function(e,t,i){return this.validateListener(e,"addOnce"),this._registerListener(e,!0,t,i)},remove:function(e,t){this.validateListener(e,"remove");t=this._indexOfListener(e,t);return-1!==t&&(this._bindings[t]._destroy(),this._bindings.splice(t,1)),e},removeAll:function(e){"undefined"==typeof e&&(e=null);for(var t=this._bindings.length;t--;)e?this._bindings[t].context===e&&(this._bindings[t]._destroy(),this._bindings.splice(t,
1)):this._bindings[t]._destroy();e||(this._bindings.length=0)},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var t=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=t),i){var e=this._bindings.slice();this._shouldPropagate=!0;do i--;while(e[i]&&this._shouldPropagate&&!1!==e[i].execute(t))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll();
delete this._bindings;delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};t$jscomp$0.prototype.constructor=t$jscomp$0;vg.Signal=t$jscomp$0})();vg.AStarFinder=function(e){e=e||{};var t={allowDiagonal:!1,heuristicFilter:null};t=vg.Tools.merge(t,e);this.allowDiagonal=t.allowDiagonal;this.heuristicFilter=t.heuristicFilter;this.list=new vg.LinkedList};vg.AStarFinder.prototype={findPath:function(e,t,i,s){var n,l,h,a;i=i||this.heuristicFilter;
s.clearPath();this.list.clear();for(this.list.add(e);0<this.list.length;){if(this.list.sort(this.compare),n=this.list.shift(),n._visited=!0,n===t)return vg.PathUtil.backtrace(t);e=s.getNeighbors(n,this.allowDiagonal,i);var o=0;for(a=e.length;a>o;o++)if(h=e[o],h.walkable&&(l=n._calcCost+s.distance(n,h),!h._visited||l<h._calcCost)){if(h._visited=!0,h._parent=n,h._calcCost=l,h._priority=l+s.distance(t,h),h===t)return vg.PathUtil.backtrace(t);this.list.add(h)}}return null},compare:function(e,t){return e._priority-
t._priority}};vg.AStarFinder.prototype.constructor=vg.AStarFinder;vg.PathUtil={backtrace:function(e){for(var t=[e];e._parent;)e=e._parent,t.push(e);return t.reverse()},biBacktrace:function(e,t){e=this.backtrace(e);t=this.backtrace(t);return e.concat(t.reverse())},pathLength:function(e){var t,r=0;for(t=1;t<e.length;++t){var i=e[t-1];var s=e[t];var n=i[0]-s[0];i=i[1]-s[1];r+=Math.sqrt(n*n+i*i)}return r},interpolate:function(e,t,i,s){var o;var n=Math.abs;var u=[];var r=n(i-e);var h=n(s-t);n=i>e?1:-1;
var l=s>t?1:-1;for(o=r-h;e!==i||t!==s;){u.push([e,t]);var a=2*o;a>-h&&(o-=h,e+=n);r>a&&(o+=r,t+=l)}return u},expandPath:function(e){var l,r,h=[],o=e.length;if(2>o)return h;for(l=0;o-1>l;++l){var t=e[l];var i=e[l+1];t=this.interpolate(t[0],t[1],i[0],i[1]);i=t.length;for(r=0;i-1>r;++r)h.push(t[r])}return h.push(e[o-1]),h},smoothenPath:function(e,t){var h,o,d,p=t.length;var s=t[0][1];var m=t[p-1][0],_=t[p-1][1];var i=t[0][0];var r=[[i,s]];for(o=2;p>o;++o){var l=t[o];var n=l[0];l=l[1];l=this.interpolate(i,
s,n,l);var g=!1;for(n=1;n<l.length;++n)if(d=l[n],!e.isWalkableAt(d[0],d[1])){g=!0;break}g&&(h=t[o-1],r.push(h),i=h[0],s=h[1])}return r.push([m,_]),r},compressPath:function(e){if(3>e.length)return e;var r,h=[];var t=e[0][0];var i=e[0][1];var c=e[1][0],u=e[1][1],d=c-t,g=u-i;var l=Math.sqrt(d*d+g*g);d/=l;g/=l;h.push([t,i]);for(r=2;r<e.length;r++){t=c;i=u;var s=d;var n=g;c=e[r][0];u=e[r][1];d=c-t;g=u-i;l=Math.sqrt(d*d+g*g);d/=l;g/=l;d===s&&g===n||h.push([t,i])}return h.push([c,u]),h}};vg.Loader={manager:null,
imageLoader:null,crossOrigin:!1,init:function(e){this.crossOrigin=e||!1;this.manager=new THREE.LoadingManager(function(){},function(){},function(){console.warn("Error loading images")});this.imageLoader=new THREE.ImageLoader(this.manager);this.imageLoader.crossOrigin=e},loadTexture:function(e$jscomp$0,t,i,s){var n=new THREE.Texture(null,t);return this.imageLoader.load(e$jscomp$0,function(e){n.image=e;n.needsUpdate=!0;i&&i(n)},null,function(e){s&&s(e)}),n.sourceFile=e$jscomp$0,n}};vg.MouseCaster=function(e,
t,i){this.rightDown=this.down=!1;this.allHits=this.selectedObject=this.pickedObject=null;this.active=!0;this.ctrl=this.shift=!1;this.wheel=0;this.position=new THREE.Vector3;this.screenPosition=new THREE.Vector2;this.signal=new vg.Signal;this.group=e;this._camera=t;this._raycaster=new THREE.Raycaster;this._preventDefault=!1;i=i||document;i.addEventListener("mousemove",this._onDocumentMouseMove.bind(this),!1);i.addEventListener("mousedown",this._onDocumentMouseDown.bind(this),!1);i.addEventListener("mouseup",
this._onDocumentMouseUp.bind(this),!1);i.addEventListener("mousewheel",this._onMouseWheel.bind(this),!1);i.addEventListener("DOMMouseScroll",this._onMouseWheel.bind(this),!1)};vg.MouseCaster.OVER="over";vg.MouseCaster.OUT="out";vg.MouseCaster.DOWN="down";vg.MouseCaster.UP="up";vg.MouseCaster.CLICK="click";vg.MouseCaster.WHEEL="wheel";vg.MouseCaster.prototype={update:function(){if(this.active){this._raycaster.setFromCamera(this.screenPosition,this._camera);var e,t,i=this._raycaster.intersectObject(this.group,
!0);0<i.length?(e=i[0],t=e.object.userData.structure,this.pickedObject!=t&&(this.pickedObject&&this.signal.dispatch(vg.MouseCaster.OUT,this.pickedObject),this.pickedObject=t,this.selectedObject=null,this.signal.dispatch(vg.MouseCaster.OVER,this.pickedObject)),this.position.copy(e.point),this.screenPosition.z=e.distance):(this.pickedObject&&this.signal.dispatch(vg.MouseCaster.OUT,this.pickedObject),this.pickedObject=null,this.selectedObject=null);this.allHits=i}},preventDefault:function(){this._preventDefault=
!0},_onDocumentMouseDown:function(e){return e=e||window.event,e.preventDefault(),this._preventDefault?(this._preventDefault=!1,!1):(this.pickedObject&&(this.selectedObject=this.pickedObject),this.shift=e.shiftKey,this.ctrl=e.ctrlKey,this.down=1===e.which,this.rightDown=3===e.which,void this.signal.dispatch(vg.MouseCaster.DOWN,this.pickedObject))},_onDocumentMouseUp:function(e){return e.preventDefault(),this._preventDefault?(this._preventDefault=!1,!1):(this.shift=e.shiftKey,this.ctrl=e.ctrlKey,this.signal.dispatch(vg.MouseCaster.UP,
this.pickedObject),this.selectedObject&&this.pickedObject&&this.selectedObject.uniqueID===this.pickedObject.uniqueID&&this.signal.dispatch(vg.MouseCaster.CLICK,this.pickedObject),this.down=1===e.which?!1:this.down,void(this.rightDown=3===e.which?!1:this.rightDown))},_onDocumentMouseMove:function(e){e.preventDefault();this.screenPosition.x=e.clientX/window.innerWidth*2-1;this.screenPosition.y=2*-(e.clientY/window.innerHeight)+1},_onMouseWheel:function(e){if(this.active){e.preventDefault();e.stopPropagation();
var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail);0<t?this.wheel++:this.wheel--;this.signal.dispatch(vg.MouseCaster.WHEEL,this.wheel)}}};vg.MouseCaster.prototype.constructor=vg.MouseCaster;vg.Scene=function(e$jscomp$0,t$jscomp$0){var i={element:document.body,alpha:!0,antialias:!0,clearColor:"#fff",sortObjects:!1,fog:null,light:new THREE.DirectionalLight(16777215),lightPosition:null,cameraType:"PerspectiveCamera",cameraPosition:null,orthoZoom:4},s={minDistance:100,maxDistance:1E3,
zoomSpeed:2,noZoom:!1};if(i=vg.Tools.merge(i,e$jscomp$0),"boolean"!=typeof t$jscomp$0&&(s=vg.Tools.merge(s,t$jscomp$0)),this.renderer=new THREE.WebGLRenderer({alpha:i.alpha,antialias:i.antialias}),this.renderer.setClearColor(i.clearColor,0),this.renderer.sortObjects=i.sortObjects,this.width=window.innerWidth,this.height=window.innerHeight,this.orthoZoom=i.orthoZoom,this.container=new THREE.Scene,this.container.fog=i.fog,this.container.add(new THREE.AmbientLight(14540253)),i.lightPosition||i.light.position.set(-1,
1,-1).normalize(),this.container.add(i.light),"OrthographicCamera"===i.cameraType){e$jscomp$0=window.innerWidth/this.orthoZoom;var l=window.innerHeight/this.orthoZoom;this.camera=new THREE.OrthographicCamera(e$jscomp$0/-2,e$jscomp$0/2,l/2,l/-2,1,5E3)}else this.camera=new THREE.PerspectiveCamera(50,this.width/this.height,1,5E3);(this.contolled=!!t$jscomp$0)&&(this.controls=new THREE.OrbitControls(this.camera,this.renderer.domElement),this.controls.minDistance=s.minDistance,this.controls.maxDistance=
s.maxDistance,this.controls.zoomSpeed=s.zoomSpeed,this.controls.noZoom=s.noZoom);i.cameraPosition&&this.camera.position.copy(i.cameraPosition);window.addEventListener("resize",function(){if(this.width=window.innerWidth,this.height=window.innerHeight,"OrthographicCamera"===this.camera.type){var e=this.width/this.orthoZoom,t=this.height/this.orthoZoom;this.camera.left=e/-2;this.camera.right=e/2;this.camera.top=t/2;this.camera.bottom=t/-2}else this.camera.aspect=this.width/this.height;this.camera.updateProjectionMatrix();
this.renderer.setSize(this.width,this.height)}.bind(this),!1);this.attachTo(i.element)};vg.Scene.prototype={attachTo:function(e){e.style.width=this.width+"px";e.style.height=this.height+"px";this.renderer.setPixelRatio(window.devicePixelRatio);this.renderer.setSize(this.width,this.height);e.appendChild(this.renderer.domElement)},add:function(e){this.container.add(e)},remove:function(e){this.container.remove(e)},render:function(){this.contolled&&this.controls.update();this.renderer.render(this.container,
this.camera)},updateOrthoZoom:function(){if(0>=this.orthoZoom)return void(this.orthoZoom=0);var e=this.width/this.orthoZoom,t=this.height/this.orthoZoom;this.camera.left=e/-2;this.camera.right=e/2;this.camera.top=t/2;this.camera.bottom=t/-2;this.camera.updateProjectionMatrix()},focusOn:function(e){this.camera.lookAt(e.position)}};vg.Scene.prototype.constructor=vg.Scene;vg.SelectionManager=function(e){this.mouse=e;this.onSelect=new vg.Signal;this.onDeselect=new vg.Signal;this.selected=null;this.toggleSelection=
!1;this.mouse.signal.add(this.onMouse,this)};vg.SelectionManager.prototype={select:function(e,t){e&&(t=t||!0,this.selected!==e&&this.clearSelection(t),e.selected?this.toggleSelection&&(t&&this.onDeselect.dispatch(e),e.deselect()):e.select(),this.selected=e,t&&this.onSelect.dispatch(e))},clearSelection:function(e){this.selected&&(this.onDeselect.dispatch(this.selected),this.selected.deselect());this.selected=null},onMouse:function(e,t){switch(e){case vg.MouseCaster.DOWN:t||this.clearSelection();break;
case vg.MouseCaster.CLICK:this.select(t)}}};vg.SelectionManager.prototype.constructor=vg.SelectionManager;vg.Tools={clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},sign:function(e){return e&&e/Math.abs(e)},random:function(e,t){return 1===arguments.length?Math.random()*e-.5*e:Math.random()*(t-e)+e},randomInt:function(e,t){return 1===arguments.length?Math.random()*e-.5*e|0:Math.random()*(t-e+1)+e|0},normalize:function(e,t,i){return(e-t)/(i-t)},getShortRotation:function(e){return e%=this.TAU,
e>this.PI?e-=this.TAU:e<-this.PI&&(e+=this.TAU),e},generateID:function(){return Math.random().toString(36).slice(2)+Date.now()},isPlainObject:function(e){if("object"!=typeof e||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(t$176){return!1}return!0},merge:function(e,t$jscomp$0){var i=this,s$jscomp$0=Array.isArray(t$jscomp$0),n=s$jscomp$0&&[]||{};return s$jscomp$0?(e=e||[],n=n.concat(e),t$jscomp$0.forEach(function(t,
s){"undefined"==typeof n[s]?n[s]=t:i.isPlainObject(t)?n[s]=i.merge(e[s],t):-1===e.indexOf(t)&&n.push(t)}),n):(e&&i.isPlainObject(e)&&Object.keys(e).forEach(function(t){n[t]=e[t]}),Object.keys(t$jscomp$0).forEach(function(s){t$jscomp$0[s]&&i.isPlainObject(t$jscomp$0[s])&&e[s]?n[s]=i.merge(e[s],t$jscomp$0[s]):n[s]=t$jscomp$0[s]}),n)},now:function(){return window.nwf?window.nwf.system.Performance.elapsedTime:window.performance.now()},empty:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},radixSort:function(e,
t,i,s){if(t=t||0,i=i||e.length,s=s||31,!(t>=i-1||0>s)){for(var n=t,l=i,r=1<<s;l>n;)if(e[n]&r){--l;var h=e[n];e[n]=e[l];e[l]=h}else++n;this.radixSort(e,t,l,s-1);this.radixSort(e,l,i,s-1)}},randomizeRGB:function(e,t){var n=e.split(","),l="rgb(";t=this.randomInt(t);for(e=0;3>e;e++){var s=parseInt(n[e])+t;0>s?s=0:255<s&&(s=255);l+=s+","}return l=l.substring(0,l.length-1),l+")"},getJSON:function(e){var t$jscomp$0=new XMLHttpRequest,s=("undefined"==typeof e.cache?0:e.cache)?e.url:e.url+"?t\x3d"+Math.floor(1E4*
Math.random())+Date.now();t$jscomp$0.onreadystatechange=function(){if(200===this.status){var t=null;try{t=JSON.parse(this.responseText)}catch(i$177){return}return void e.callback.call(e.scope||null,t)}0!==this.status&&console.warn("[Tools.getJSON] Error: "+this.status+" ("+this.statusText+") :: "+e.url)};t$jscomp$0.open("GET",s,!0);t$jscomp$0.setRequestHeader("Accept","application/json");t$jscomp$0.setRequestHeader("Content-Type","application/json");t$jscomp$0.send("")}}}
//# sourceMappingURL=module$node_modules$aframe_extras$lib$hex_grid_min.js.map
