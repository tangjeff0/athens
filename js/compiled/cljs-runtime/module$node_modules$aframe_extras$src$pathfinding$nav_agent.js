shadow$provide.module$node_modules$aframe_extras$src$pathfinding$nav_agent=function(global,require,module,exports){module.exports=AFRAME.registerComponent("nav-agent",{schema:{destination:{type:"vec3"},active:{default:!1},speed:{default:2}},init:function(){this.system=this.el.sceneEl.systems.nav;this.system.addAgent(this);this.group=null;this.path=[];this.raycaster=new THREE.Raycaster},remove:function(){this.system.removeAgent(this)},update:function(){this.path.length=0},updateNavLocation:function(){this.group=
null;this.path=[]},tick:function(){var vDest=new THREE.Vector3,vDelta=new THREE.Vector3,vNext=new THREE.Vector3;return function(t,dt){t=this.el;var data=this.data,raycaster=this.raycaster;dt=data.speed*dt/1E3;if(data.active){if(!this.path.length){var position=this.el.object3D.position;this.group=this.group||this.system.getGroup(position);this.path=this.system.getPath(position,vDest.copy(data.destination),this.group)||[];t.emit("navigation-start")}if(this.path.length){data=t.object3D.position;position=
this.path[0];vDelta.subVectors(position,data);if(vDelta.length()<dt){this.path.shift();if(!this.path.length){this.el.setAttribute("nav-agent",{active:!1});t.emit("navigation-end");return}vNext.copy(data);position=this.path[0]}else vNext.copy(vDelta.setLength(dt)).add(data);position.y=data.y;t.object3D.lookAt(position);raycaster.ray.origin.copy(vNext);raycaster.ray.origin.y+=1.5;raycaster.ray.direction.y=-1;t=raycaster.intersectObject(this.system.getNavMesh());t.length?(vDelta.subVectors(t[0].point,
data),data.add(vDelta.setLength(dt))):data.copy(vNext)}else console.warn("[nav] Unable to find path to %o.",data.destination),this.el.setAttribute("nav-agent",{active:!1}),t.emit("navigation-end")}}}()})}
//# sourceMappingURL=module$node_modules$aframe_extras$src$pathfinding$nav_agent.js.map
