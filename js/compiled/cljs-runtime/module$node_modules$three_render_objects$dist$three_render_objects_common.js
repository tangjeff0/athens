shadow$provide.module$node_modules$three_render_objects$dist$three_render_objects_common=function(global,require,module,exports){function _interopDefaultLegacy(e){return e&&"object"===typeof e&&"default"in e?e:{"default":e}}function _slicedToArray(arr,i){var JSCompiler_inline_result=Array.isArray(arr)?arr:void 0;if(!JSCompiler_inline_result)if("undefined"!==typeof Symbol&&Symbol.iterator in Object(arr)){JSCompiler_inline_result=[];var _n=!0,_d=!1,_e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=
(_s=_i.next()).done)&&(JSCompiler_inline_result.push(_s.value),!i||JSCompiler_inline_result.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i["return"])_i["return"]()}finally{if(_d)throw _e;}}}else JSCompiler_inline_result=void 0;if(!(arr=JSCompiler_inline_result||_unsupportedIterableToArray(arr,i)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return arr}function _toConsumableArray(arr){var JSCompiler_inline_result=
Array.isArray(arr)?_arrayLikeToArray(arr):void 0;JSCompiler_inline_result||(JSCompiler_inline_result="undefined"!==typeof Symbol&&Symbol.iterator in Object(arr)?Array.from(arr):void 0);if(!(arr=JSCompiler_inline_result||_unsupportedIterableToArray(arr)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return arr}function _unsupportedIterableToArray(o,minLen){if(o){if("string"===typeof o)return _arrayLikeToArray(o,
minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}}function _arrayLikeToArray(arr,len){if(null==len||len>arr.length)len=arr.length;for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}global=require("module$node_modules$three$build$three");var TrackballControls_js=require("module$node_modules$three$examples$jsm$controls$TrackballControls"),
OrbitControls_js=require("module$node_modules$three$examples$jsm$controls$OrbitControls"),FlyControls_js=require("module$node_modules$three$examples$jsm$controls$FlyControls"),EffectComposer_js=require("module$node_modules$three$examples$jsm$postprocessing$EffectComposer"),RenderPass_js=require("module$node_modules$three$examples$jsm$postprocessing$RenderPass"),polished=require("module$node_modules$polished$dist$polished_cjs");exports=require("module$node_modules$$tweenjs$tween_js$dist$tween_cjs");
var accessorFn=require("module$node_modules$accessor_fn$dist$accessor_fn_common");require=require("module$node_modules$kapsule$dist$kapsule_common");var TWEEN__default=_interopDefaultLegacy(exports),accessorFn__default=_interopDefaultLegacy(accessorFn);require=_interopDefaultLegacy(require);(function(css,ref){void 0===ref&&(ref={});ref=ref.insertAt;if(css&&"undefined"!==typeof document){var head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type=
"text/css";"top"===ref?head.firstChild?head.insertBefore(style,head.firstChild):head.appendChild(style):head.appendChild(style);style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css))}})(".scene-nav-info {\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n}\n\n.scene-tooltip {\n  color: lavender;\n  font-size: 15px;\n}\n\n.scene-nav-info, .scene-tooltip {\n  position: absolute;\n  font-family: sans-serif;\n  pointer-events: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}");
var three=window.THREE?window.THREE:{WebGLRenderer:global.WebGLRenderer,Scene:global.Scene,PerspectiveCamera:global.PerspectiveCamera,Raycaster:global.Raycaster,TextureLoader:global.TextureLoader,Vector2:global.Vector2,Vector3:global.Vector3,Box3:global.Box3,Color:global.Color,Mesh:global.Mesh,SphereGeometry:global.SphereGeometry,MeshBasicMaterial:global.MeshBasicMaterial,BackSide:global.BackSide,EventDispatcher:global.EventDispatcher,MOUSE:global.MOUSE,Quaternion:global.Quaternion,Spherical:global.Spherical,
Clock:global.Clock};require=require["default"]({props:{width:{"default":window.innerWidth,onChange:function(width,state,prevWidth){isNaN(width)&&(state.width=prevWidth)}},height:{"default":window.innerHeight,onChange:function(height,state,prevHeight){isNaN(height)&&(state.height=prevHeight)}},backgroundColor:{"default":"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{"default":!0},skyRadius:{"default":5E4},objects:{"default":[]},enablePointerInteraction:{"default":!0,onChange:function(_,
state){state.hoverObj=null;state.toolTipElem&&(state.toolTipElem.innerHTML="")},triggerUpdate:!1},lineHoverPrecision:{"default":1,triggerUpdate:!1},hoverOrderComparator:{"default":function(){return-1},triggerUpdate:!1},hoverFilter:{"default":function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{"default":!1,triggerUpdate:!1},clickAfterDrag:{"default":!1,triggerUpdate:!1},onHover:{"default":function(){},triggerUpdate:!1},onClick:{"default":function(){},triggerUpdate:!1},
onRightClick:{triggerUpdate:!1}},methods:{tick:function(state){if(state.initialised){state.controls.update&&state.controls.update(state.clock.getDelta());state.postProcessingComposer?state.postProcessingComposer.render():state.renderer.render(state.scene,state.camera);if(state.enablePointerInteraction){var topObject=null;if(state.hoverDuringDrag||!state.isPointerDragging){topObject=this.intersectingObjects(state.pointerPos.x,state.pointerPos.y).filter(function(d){return state.hoverFilter(d.object)}).sort(function(a,
b){return state.hoverOrderComparator(a.object,b.object)});var topIntersect=topObject.length?topObject[0]:null;topObject=topIntersect?topIntersect.object:null;state.intersectionPoint=topIntersect?topIntersect.point:null}topObject!==state.hoverObj&&(state.onHover(topObject,state.hoverObj),state.toolTipElem.innerHTML=topObject?accessorFn__default["default"](state.tooltipContent)(topObject)||"":"",state.hoverObj=topObject)}TWEEN__default["default"].update()}return this},getPointerPos:function(state){state=
state.pointerPos;return{x:state.x,y:state.y}},cameraPosition:function(state,position,lookAt$jscomp$0,transitionDuration){function setCameraPos(pos){var x=pos.x,y=pos.y;pos=pos.z;void 0!==x&&(camera.position.x=x);void 0!==y&&(camera.position.y=y);void 0!==pos&&(camera.position.z=pos)}function setLookAt(lookAt){state.controls.target=new three.Vector3(lookAt.x,lookAt.y,lookAt.z)}function getLookAt(){return Object.assign((new three.Vector3(0,0,-1E3)).applyQuaternion(camera.quaternion).add(camera.position))}
var camera=state.camera;if(position&&state.initialised){lookAt$jscomp$0=lookAt$jscomp$0||{x:0,y:0,z:0};if(transitionDuration){var camPos=Object.assign({},camera.position),camLookAt=getLookAt();(new TWEEN__default["default"].Tween(camPos)).to(position,transitionDuration).easing(TWEEN__default["default"].Easing.Quadratic.Out).onUpdate(setCameraPos).start();(new TWEEN__default["default"].Tween(camLookAt)).to(lookAt$jscomp$0,transitionDuration/3).easing(TWEEN__default["default"].Easing.Quadratic.Out).onUpdate(setLookAt).start()}else setCameraPos(position),
setLookAt(lookAt$jscomp$0);return this}return Object.assign({},camera.position,{lookAt:getLookAt()})},zoomToFit:function(state){for(var transitionDuration=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,padding=2<arguments.length&&void 0!==arguments[2]?arguments[2]:10,_len=arguments.length,bboxArgs=Array(3<_len?_len-3:0),_key=3;_key<_len;_key++)bboxArgs[_key-3]=arguments[_key];return this.fitToBbox(this.getBbox.apply(this,bboxArgs),transitionDuration,padding)},fitToBbox:function(state,bbox){var transitionDuration=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,padding=3<arguments.length&&void 0!==arguments[3]?arguments[3]:10,camera=state.camera;if(bbox){var center=new three.Vector3(0,0,0);padding=2*Math.max.apply(Math,_toConsumableArray(Object.entries(bbox).map(function(_ref){_ref=_slicedToArray(_ref,2);var coordType=_ref[0];return Math.max.apply(Math,_toConsumableArray(_ref[1].map(function(c){return Math.abs(center[coordType]-c)})))})))/Math.atan((1-2*padding/state.height)*camera.fov*Math.PI/180);
padding=Math.max(padding,padding/camera.aspect);0<padding&&(camera=center.clone().sub(camera.position).normalize().multiplyScalar(-padding),this.cameraPosition(camera,center,transitionDuration))}return this},getBbox:function(state){var objFilter=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0},box=new three.Box3(new three.Vector3(0,0,0),new three.Vector3(0,0,0));objFilter=state.objects.filter(objFilter);if(!objFilter.length)return null;objFilter.forEach(function(obj){return box.expandByObject(obj)});
return Object.assign.apply(Object,_toConsumableArray(["x","y","z"].map(function(c){var obj={},value=[box.min[c],box.max[c]];c in obj?Object.defineProperty(obj,c,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[c]=value;return obj})))},getScreenCoords:function(state,x,y,z){x=new three.Vector3(x,y,z);x.project(this.camera());return{x:(x.x+1)*state.width/2,y:-(x.y-1)*state.height/2}},intersectingObjects:function(state,x,y){x=new three.Vector2(x/state.width*2-1,2*-(y/state.height)+1);y=new three.Raycaster;
y.params.Line.threshold=state.lineHoverPrecision;y.setFromCamera(x,state.camera);return y.intersectObjects(state.objects,!0)},renderer:function(state){return state.renderer},scene:function(state){return state.scene},camera:function(state){return state.camera},postProcessingComposer:function(state){return state.postProcessingComposer},controls:function(state){return state.controls},tbControls:function(state){return state.controls}},stateInit:function(){return{scene:new three.Scene,camera:new three.PerspectiveCamera,
clock:new three.Clock}},init:function(domNode,state,_ref4){var _ref4$controlType=_ref4.controlType;_ref4$controlType=void 0===_ref4$controlType?"trackball":_ref4$controlType;var _ref4$rendererConfig=_ref4.rendererConfig;_ref4$rendererConfig=void 0===_ref4$rendererConfig?{}:_ref4$rendererConfig;_ref4=_ref4.waitForLoadComplete;_ref4=void 0===_ref4?!0:_ref4;domNode.innerHTML="";domNode.appendChild(state.container=document.createElement("div"));state.container.className="scene-container";state.container.style.position=
"relative";state.container.appendChild(state.navInfo=document.createElement("div"));state.navInfo.className="scene-nav-info";state.navInfo.textContent={orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"}[_ref4$controlType]||"";state.navInfo.style.display=state.showNavInfo?null:"none";state.toolTipElem=document.createElement("div");
state.toolTipElem.classList.add("scene-tooltip");state.container.appendChild(state.toolTipElem);state.pointerPos=new three.Vector2;state.pointerPos.x=-2;state.pointerPos.y=-2;["pointermove","pointerdown"].forEach(function(evType){return state.container.addEventListener(evType,function(ev){function getOffset(el){el=el.getBoundingClientRect();return{top:el.top+(window.pageYOffset||document.documentElement.scrollTop),left:el.left+(window.pageXOffset||document.documentElement.scrollLeft)}}!state.isPointerDragging&&
"pointermove"===ev.type&&0<ev.pressure&&[ev.movementX,ev.movementY].some(function(m){return Math.abs(m)>("touch"===ev.pointerType?1:0)})&&(state.isPointerDragging=!0);if(state.enablePointerInteraction){var offset=getOffset(state.container);state.pointerPos.x=ev.pageX-offset.left;state.pointerPos.y=ev.pageY-offset.top;state.toolTipElem.style.top="".concat(state.pointerPos.y,"px");state.toolTipElem.style.left="".concat(state.pointerPos.x,"px");state.toolTipElem.style.transform="translate(-".concat(state.pointerPos.x/
state.width*100,"%, 21px)")}},{passive:!0})});state.container.addEventListener("pointerup",function(ev){if(state.isPointerDragging&&(state.isPointerDragging=!1,!state.clickAfterDrag))return;requestAnimationFrame(function(){if(0===ev.button)state.onClick(state.hoverObj||null,ev,state.intersectionPoint);if(2===ev.button&&state.onRightClick)state.onRightClick(state.hoverObj||null,ev,state.intersectionPoint)})},{passive:!0,capture:!0});state.container.addEventListener("contextmenu",function(ev){state.onRightClick&&
ev.preventDefault()});state.renderer=new three.WebGLRenderer(Object.assign({antialias:!0,alpha:!0},_ref4$rendererConfig));state.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio));state.container.appendChild(state.renderer.domElement);state.postProcessingComposer=new EffectComposer_js.EffectComposer(state.renderer);state.postProcessingComposer.addPass(new RenderPass_js.RenderPass(state.scene,state.camera));state.controls=new {trackball:TrackballControls_js.TrackballControls,orbit:OrbitControls_js.OrbitControls,
fly:FlyControls_js.FlyControls}[_ref4$controlType](state.camera,state.renderer.domElement);"fly"===_ref4$controlType&&(state.controls.movementSpeed=300,state.controls.rollSpeed=Math.PI/6,state.controls.dragToLook=!0);if("trackball"===_ref4$controlType||"orbit"===_ref4$controlType)state.controls.minDistance=.1,state.controls.maxDistance=state.skyRadius,state.controls.addEventListener("start",function(){return state.controlsEngaged=!0}),state.controls.addEventListener("change",function(){state.controlsEngaged&&
(state.controlsDragging=!0)}),state.controls.addEventListener("end",function(){state.controlsEngaged=!1;state.controlsDragging=!1});state.renderer.setSize(state.width,state.height);state.postProcessingComposer.setSize(state.width,state.height);state.camera.aspect=state.width/state.height;state.camera.updateProjectionMatrix();state.camera.position.z=1E3;state.scene.add(state.skysphere=new three.Mesh);state.skysphere.visible=!1;state.loadComplete=state.scene.visible=!_ref4;window.scene=state.scene},
update:function(state,changedProps){state.width&&state.height&&(changedProps.hasOwnProperty("width")||changedProps.hasOwnProperty("height"))&&(state.container.style.width=state.width,state.container.style.height=state.height,state.renderer.setSize(state.width,state.height),state.postProcessingComposer.setSize(state.width,state.height),state.camera.aspect=state.width/state.height,state.camera.updateProjectionMatrix());changedProps.hasOwnProperty("skyRadius")&&state.skyRadius&&(state.controls.hasOwnProperty("maxDistance")&&
changedProps.skyRadius&&(state.controls.maxDistance=state.skyRadius),state.camera.far=2.5*state.skyRadius,state.camera.updateProjectionMatrix(),state.skysphere.geometry=new three.SphereGeometry(state.skyRadius));if(changedProps.hasOwnProperty("backgroundColor")){var alpha=polished.parseToRgb(state.backgroundColor).alpha;void 0===alpha&&(alpha=1);state.renderer.setClearColor(new three.Color(polished.opacify(1,state.backgroundColor)),alpha)}changedProps.hasOwnProperty("backgroundImageUrl")&&(state.backgroundImageUrl?
(new three.TextureLoader).load(state.backgroundImageUrl,function(texture){state.skysphere.material=new three.MeshBasicMaterial({map:texture,side:three.BackSide});state.skysphere.visible=!0;state.onBackgroundImageLoaded&&setTimeout(state.onBackgroundImageLoaded);state.loadComplete||(state.loadComplete=state.scene.visible=!0)}):(state.skysphere.visible=!1,state.skysphere.material.map=null,state.loadComplete||(state.loadComplete=state.scene.visible=!0)));changedProps.hasOwnProperty("showNavInfo")&&(state.navInfo.style.display=
state.showNavInfo?null:"none");changedProps.hasOwnProperty("objects")&&((changedProps.objects||[]).forEach(function(obj){return state.scene.remove(obj)}),state.objects.forEach(function(obj){return state.scene.add(obj)}))}});module.exports=require}
//# sourceMappingURL=module$node_modules$three_render_objects$dist$three_render_objects_common.js.map
